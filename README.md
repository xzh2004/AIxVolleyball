# 🏐 排球AI闯关训练系统 - Demo版

## 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 启动应用
```bash
streamlit run app.py
```

### 3. 使用方法
1. 打开浏览器访问 `http://localhost:8501`
2. 上传垫球视频（MP4/AVI格式）
3. 系统自动识别姿态并给出评分
4. 查看详细反馈和改进建议

## 项目结构
```
volleyball/
├── app.py                        # Streamlit主界面
├── pose_detector.py              # MediaPipe姿态识别
├── scorer.py                     # 评分算法
├── video_processor.py            # 视频处理
├── sequence_analyzer.py          # 连续帧分析 ⭐ NEW
├── trajectory_visualizer.py      # 轨迹可视化 ⭐ NEW
├── template.json                 # 标准动作模板
├── requirements.txt              # 依赖包
├── README.md                     # 说明文档
├── 更新日志.md                   # 版本更新记录
└── 连续帧分析使用指南.md         # 详细使用教程
```

## 评分标准

### 单帧模式
- **手臂角度** (40分): 双臂伸直，夹角 < 30°
- **身体重心** (30分): 膝盖弯曲 60-90°，重心下沉
- **触球位置** (20分): 接触点在腰腹前方
- **整体稳定性** (10分): 姿态置信度

### 连续帧模式（推荐）
- **姿态质量** (60%): 包含上述4个维度
- **动作质量** (40%):
  - 流畅度: 动作平滑连贯程度
  - 完整性: 动作是否完整清晰
  - 一致性: 双侧对称稳定性

## 注意事项
- 视频建议：正面拍摄，全身入镜，光线充足
- 文件大小：建议 < 50MB
- 视频时长：3-10秒最佳

## 技术栈
- MediaPipe Pose (姿态识别)
- OpenCV (视频处理)
- Streamlit (Web界面)
- NumPy + SciPy (数值计算)
- Matplotlib (可视化图表)

## 功能特点

### 核心功能
- ✅ **双模式分析**: 单帧快速分析 + 连续帧深度分析
- ✅ **MediaPipe 33点姿态识别**: 高精度人体关键点检测
- ✅ **多维度评分系统**: 7个维度全面评估
- ✅ **动作轨迹可视化**: 2D轨迹图 + 角度时间轴
- ✅ **智能反馈建议**: 精准定位问题并给出改进方案
- ✅ **游戏化关卡系统**: 3个难度关卡，循序渐进

### 连续帧分析（v2.0 新增）
- 🎬 **流畅度评估**: 分析动作平滑连贯程度
- 🎬 **完整性检测**: 确保动作全过程清晰
- 🎬 **一致性评分**: 评估左右对称稳定性
- 🎬 **轨迹追踪**: 可视化关键点运动路径
- 🎬 **时间轴分析**: 追踪角度变化趋势

## 版本信息
- **当前版本**: v2.0.0 (连续帧分析版)
- **更新日期**: 2025-10-28
- **重大更新**: 从静态分析升级到动态分析

查看完整更新日志：[更新日志.md](更新日志.md)  
连续帧使用教程：[连续帧分析使用指南.md](连续帧分析使用指南.md)

